"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _path=_interopRequireDefault(require("path")),_express=_interopRequireDefault(require("express")),_morgan=_interopRequireDefault(require("morgan")),_utils=require("../utils.js"),_constant=require("../constant.js"),_server=_interopRequireDefault(require("./server.prd")),_server2=_interopRequireDefault(require("./server.dev")),_default=function _default(a){var b=a.mode,c=void 0===b?"develop":b,d=a.env,e=a.port,f=a.apiServer,g=void 0===f?null:f,h=(0,_express["default"])();// server.use(express.static('', ));
h.engine("html",require("express-art-template")),h.set("view engine","html"),_utils.logger.log(c),"prd"===c.toLowerCase()||"production"===c.toLowerCase()?h.use((0,_server["default"])()):h.use((0,_server2["default"])()),h.use(function(a,b){b.status(404).render(_path["default"].join(__dirname,"./404.html"))}),h.disable("x-powered-by"),h.enable("trust proxy"),h.listen(e,function(a){return a?_utils.logger.log(a):void _utils.logger.primary("Listening on port `".concat(e,"`. Open up http://127.0.0.1:").concat(e,"/ in your browser."))})};exports["default"]=_default;