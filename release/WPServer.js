"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=void 0;var _path=_interopRequireDefault(require("path")),_fs=_interopRequireDefault(require("fs")),_express=_interopRequireDefault(require("express")),_webpackDevMiddleware=_interopRequireDefault(require("webpack-dev-middleware")),_webpackHotMiddleware=_interopRequireDefault(require("webpack-hot-middleware")),_httpProxyMiddleware=_interopRequireDefault(require("http-proxy-middleware")),_utils=require("./utils.js"),app=(0,_express["default"])(),_default=function _default(a,b){var c=a.options;c=void 0===c?{}:c;var d=c.output;d=void 0===d?{}:d;var e=d.path,f=d.publicPath;app.engine("html",require("express-art-template")),app.set("view engine","html"),app.set("views",e);// app.use('/gmall', router);
app.use("/favicon.ico",function(a,b){b.status(404).send("Sorry cant find that!")}),app.use((0,_webpackDevMiddleware["default"])(a,{publicPath:f,noInfo:!1,writeToDisk:!1,headers:{"X-Custom-Header":"yes"},logLevel:"warn"})),app.use((0,_webpackHotMiddleware["default"])(a)),app.use(_express["default"]["static"](e)),app.use((0,_httpProxyMiddleware["default"])({target:"http://localhost:".concat(b),pathRewrite:{"^/.*":"/index.html"}})),app.use(function(a,b){b.status(404).send("404!")}),app.listen(b,function(a){return a?_utils.logger.log(a):void _utils.logger.primary("Listening on port :".concat(b,". Open up http://localhost:").concat(b,"/ in your browser."))})};exports["default"]=_default;